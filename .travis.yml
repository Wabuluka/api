language: python
python:
  # test it on two different Python versions
  - '2.7'
  - '3.6'
install:
  # install dependencies
  - pip install -r requirements.txt
  - "pip install -r requirements-test.txt" 
  - "pip install coveralls"
  - "pip install pylint"
script:
  # python tests
  - python -m coverage run --branch --source=src -m unittest discover -s tests -v
  # coverage reports
  - python -m coverage report -m
  script: nosetests --with-coverage --cover-erase --cover-inclusive --cover-package=pylint_server
after_success:
    - coveralls
    - pylint --output-format=html pylint_server > /tmp/pylint-report.html
    - curl -v -m 120 -X POST -F travis-job-id=$TRAVIS_JOB_ID -F pylint-report=@/tmp/pylint-report.html https://pylint.yourserver.com/reports
